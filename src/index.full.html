<!DOCTYPE html>
<html class="no-js" itemscope itemtype="https://schema.org/SearchAction">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>thatPub</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="https://that.pub/humans.txt">

    <link rel="shortcut icon" href="https://that.pub/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://that.pub/apple-touch-icon.png">

    <style>
@charset "UTF-8";
/* http://meyerweb.com/eric/tools/css/reset/
   v2.0 | 20110126
   License: none (public domain)
*/
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed,
figure, figcaption, footer, header, hgroup,
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
  margin: 0;
  padding: 0;
  border: 0;
  font-size: 100%;
  font: inherit;
  vertical-align: baseline;
}

/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure,
footer, header, hgroup, menu, nav, section {
  display: block;
}

body {
  line-height: 1;
}

ol, ul {
  list-style: none;
}

blockquote, q {
  quotes: none;
}

blockquote:before, blockquote:after,
q:before, q:after {
  content: '';
  content: none;
}

table {
  border-collapse: collapse;
  border-spacing: 0;
}

/* ==========================================================================
   Normalize.scss settings
   ========================================================================== */
/**
 * Includes legacy browser support IE6/7
 *
 * Set to false if you want to drop support for IE6 and IE7
 */
/* Base
   ========================================================================== */
/**
 * 1. Set default font family to sans-serif.
 * 2. Prevent iOS text size adjust after orientation change, without disabling
 *  user zoom.
 * 3. Corrects text resizing oddly in IE 6/7 when body `font-size` is set using
 *  `em` units.
 */
html {
  font-family: sans-serif;
  /* 1 */
  -ms-text-size-adjust: 100%;
  /* 2 */
  -webkit-text-size-adjust: 100%;
  /* 2 */
}

/**
 * Remove default margin.
 */
body {
  margin: 0;
}

/* HTML5 display definitions
   ========================================================================== */
/**
 * Correct `block` display not defined for any HTML5 element in IE 8/9.
 * Correct `block` display not defined for `details` or `summary` in IE 10/11
 * and Firefox.
 * Correct `block` display not defined for `main` in IE 11.
 */
article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
  display: block;
}

/**
 * 1. Correct `inline-block` display not defined in IE 6/7/8/9 and Firefox 3.
 * 2. Normalize vertical alignment of `progress` in Chrome, Firefox, and Opera.
 */
audio,
canvas,
progress,
video {
  display: inline-block;
  /* 1 */
  vertical-align: baseline;
  /* 2 */
}

/**
 * Prevents modern browsers from displaying `audio` without controls.
 * Remove excess height in iOS 5 devices.
 */
audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Address `[hidden]` styling not present in IE 8/9/10.
 * Hide the `template` element in IE 8/9/11, Safari, and Firefox < 22.
 */
[hidden],
template {
  display: none;
}

/* Links
   ========================================================================== */
/**
 * Remove the gray background color from active links in IE 10.
 */
a {
  background-color: transparent;
}

/**
 * Improve readability when focused and also mouse hovered in all browsers.
 */
a:active, a:hover {
  outline: 0;
}

/* Text-level semantics
   ========================================================================== */
/**
 * Address styling not present in IE 8/9/10/11, Safari, and Chrome.
 */
abbr[title] {
  border-bottom: 1px dotted;
}

/**
 * Address style set to `bolder` in Firefox 4+, Safari, and Chrome.
 */
b,
strong {
  font-weight: bold;
}

/**
 * Address styling not present in Safari and Chrome.
 */
dfn {
  font-style: italic;
}

/**
 * Address variable `h1` font-size and margin within `section` and `article`
 * contexts in Firefox 4+, Safari, and Chrome.
 */
h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/**
 * Addresses styling not present in IE 8/9.
 */
mark {
  background: #ff0;
  color: #000;
}

/**
 * Address inconsistent and variable font size in all browsers.
 */
small {
  font-size: 75%;
}

/**
 * Prevent `sub` and `sup` affecting `line-height` in all browsers.
 */
sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sup {
  top: -0.5em;
}

sub {
  bottom: -0.25em;
}

/* Embedded content
   ========================================================================== */
/**
 * 1. Remove border when inside `a` element in IE 8/9/10.
 * 2. Improves image quality when scaled in IE 7.
 */
img {
  border: 0;
}

/**
 * Correct overflow not hidden in IE 9/10/11.
 */
svg:not(:root) {
  overflow: hidden;
}

/* Grouping content
   ========================================================================== */
/**
 * Address margin not present in IE 8/9 and Safari.
 */
figure {
  margin: 1em 40px;
}

/**
 * Address differences between Firefox and other browsers.
 */
hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

/**
 * Contain overflow in all browsers.
 */
pre {
  overflow: auto;
}

/**
 * Address odd `em`-unit font size rendering in all browsers.
 * Correct font family set oddly in IE 6, Safari 4/5, and Chrome.
 */
code,
kbd,
pre,
samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

/* Forms
   ========================================================================== */
/**
 * Known limitation: by default, Chrome and Safari on OS X allow very limited
 * styling of `select`, unless a `border` property is set.
 */
/**
 * 1. Correct color not being inherited.
 *  Known issue: affects color of disabled elements.
 * 2. Correct font properties not being inherited.
 * 3. Address margins set differently in Firefox 4+, Safari, and Chrome.
 * 4. Improves appearance and consistency in all browsers.
 */
button,
input,
optgroup,
select,
textarea {
  color: inherit;
  /* 1 */
  font: inherit;
  /* 2 */
  margin: 0;
  /* 3 */
}

/**
 * Address `overflow` set to `hidden` in IE 8/9/10/11.
 */
button {
  overflow: visible;
}

/**
 * Address inconsistent `text-transform` inheritance for `button` and `select`.
 * All other form control elements do not inherit `text-transform` values.
 * Correct `button` style inheritance in Firefox, IE 8/9/10/11, and Opera.
 * Correct `select` style inheritance in Firefox.
 */
button,
select {
  text-transform: none;
}

/**
 * 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio`
 *  and `video` controls.
 * 2. Correct inability to style clickable `input` types in iOS.
 * 3. Improve usability and consistency of cursor style between image-type
 *  `input` and others.
 * 4. Removes inner spacing in IE 7 without affecting normal text inputs.
 *  Known issue: inner spacing remains in IE 6.
 */
button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
  -webkit-appearance: button;
  /* 2 */
  cursor: pointer;
  /* 3 */
}

/**
 * Re-set default cursor for disabled elements.
 */
button[disabled],
html input[disabled] {
  cursor: default;
}

/**
 * Remove inner padding and border in Firefox 4+.
 */
button::-moz-focus-inner,
input::-moz-focus-inner {
  border: 0;
  padding: 0;
}

/**
 * Address Firefox 4+ setting `line-height` on `input` using `!important` in
 * the UA stylesheet.
 */
input {
  line-height: normal;
}

/**
 * 1. Address box sizing set to `content-box` in IE 8/9/10.
 * 2. Remove excess padding in IE 8/9/10.
 *  Known issue: excess padding remains in IE 6.
 */
input[type="checkbox"],
input[type="radio"] {
  box-sizing: border-box;
  /* 1 */
  padding: 0;
  /* 2 */
}

/**
 * Fix the cursor style for Chrome's increment/decrement buttons. For certain
 * `font-size` values of the `input`, it causes the cursor style of the
 * decrement button to change from `default` to `text`.
 */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Address `appearance` set to `searchfield` in Safari and Chrome.
 * 2. Address `box-sizing` set to `border-box` in Safari and Chrome
 *  (include `-moz` to future-proof).
 */
input[type="search"] {
  -webkit-appearance: textfield;
  /* 1 */
  -moz-box-sizing: content-box;
  -webkit-box-sizing: content-box;
  /* 2 */
  box-sizing: content-box;
}

/**
 * Remove inner padding and search cancel button in Safari and Chrome on OS X.
 * Safari (but not Chrome) clips the cancel button when the search input has
 * padding (and `textfield` appearance).
 */
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * Define consistent border, margin, and padding.
 */
fieldset {
  border: 1px solid #c0c0c0;
  margin: 0 2px;
  padding: 0.35em 0.625em 0.75em;
}

/**
 * 1. Correct `color` not being inherited in IE 8/9/10/11.
 * 2. Remove padding so people aren't caught out if they zero out fieldsets.
 * 3. Corrects text not wrapping in Firefox 3.
 * 4. Corrects alignment displayed oddly in IE 6/7.
 */
legend {
  border: 0;
  /* 1 */
  padding: 0;
  /* 2 */
}

/**
 * Remove default vertical scrollbar in IE 8/9/10/11.
 */
textarea {
  overflow: auto;
}

/**
 * Don't inherit the `font-weight` (applied by a rule above).
 * NOTE: the default cannot safely be changed in Chrome and Safari on OS X.
 */
optgroup {
  font-weight: bold;
}

/* Tables
   ========================================================================== */
/**
 * Remove most spacing between table cells.
 */
table {
  border-collapse: collapse;
  border-spacing: 0;
}

td,
th {
  padding: 0;
}

/*$heading: Montserrat, Quando, Quicksand, Georgia, Trebuchet MS, serif;*/
h1, h2, h3, h4, h5, h6, label {
  cursor: default;
  font-family: Droid Serif, Times New Roman, Times Roman, Times, Georgia, serif;
}

.label {
  color: #666666;
  font-weight: 300;
  text-align: center;
  margin-top: 2rem;
}
.label small {
  color: #AAAAAA;
}

.search-title {
  color: #FF9E00;
  text-shadow: 0 1px 0 #FEFEFE;
  font-family: Droid Serif, Times New Roman, Times Roman, Times, Georgia, serif;
  font-size: 1.25rem;
  margin: 0 auto;
  position: relative;
  width: 100%;
  text-align: center;
}
@media all and (min-width: 480px) {
  .search-title {
    font-size: 1.75rem;
  }
}

.no-textshadow .search-title {
  color: #FFFFCC;
}

*, :after, :before {
  -webkit-box-sizing: border-box !important;
  -moz-box-sizing: border-box !important;
  box-sizing: border-box !important;
}

::-moz-selection {
  background: #b3d4fc;
  text-shadow: none;
}

::selection {
  background: #b3d4fc;
  text-shadow: none;
}

html {
  overflow-y: scroll;
  -webkit-font-smoothing: subpixel-antialiased;
  -moz-osx-font-smoothing: greyscale;
  zoom: 1;
  *zoom: 1;
  font-size: 15px;
}

html, body {
  min-height: 100%;
  min-width: 100%;
}

html,
button,
select,
input,
textarea {
  color: #666666;
  outline: 0;
  font-weight: 200;
}

body {
  font-family: Droid Serif, Times New Roman, Times Roman, Times, Georgia, serif;
  /*font-size: 15px;*/
  font-size: 100%;
  line-height: 1.5;
  background: #FAFAFA;
  /*background: $bg-color url(img/t-38_X1.png) right top;
  background-repeat: repeat;
  background-attachment: fixed;*/
}

a {
  color: #FF9E00;
  text-decoration: none;
  border-bottom: 1px solid transparent;
}

q {
  position: relative;
  quotes: "“" "”" "‘" "’";
}
q:before {
  content: open-quote;
}
q:after {
  content: close-quote;
}

hr {
  display: block;
  height: 1px;
  border: 0;
  border-top: 1px solid #ccc;
  margin: 1rem 0;
  padding: 0;
}

audio,
canvas,
img,
video {
  vertical-align: middle;
}

fieldset {
  border: 0;
  margin: 0;
  padding: 0;
}

textarea {
  resize: vertical;
}

.wrapper {
  opacity: 1;
  display: block;
  margin: 0;
}
@media all and (min-width: 768px) {
  .wrapper {
    max-width: 864px;
    width: 90%;
    margin: 0 auto;
  }
}
@media all and (min-width: 1140px) {
  .wrapper {
    width: 864px;
    /* 1140px - 10% for margins */
    margin: 0 auto;
  }
}

.full-wrap {
  opacity: .5;
  display: none;
  width: 90%;
  margin: auto;
}
.done .full-wrap {
  display: block;
}
.failed .full-wrap {
  display: none;
}

.page-wrap {
  box-shadow: 0 0 3px rgba(0, 0, 0, 0.25);
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  top: 0;
  background-color: #FEFEFE;
  padding: 2rem 2rem 8rem;
  margin: 5rem auto;
  border-right: 1px solid #FAFAFA;
  border-left: 1px solid #FAFAFA;
  position: relative;
  display: none;
}
.page-wrap:before, .page-wrap:after {
  bottom: 26px;
  box-shadow: 0 28px 8px rgba(0, 0, 0, 0.25);
  content: "";
  height: 28px;
  position: absolute;
  width: 48%;
  z-index: -1;
}
.page-wrap:before {
  left: 2%;
  transform: rotate(-3deg);
}
.page-wrap:after {
  right: 2%;
  transform: rotate(3deg);
}
.done .page-wrap {
  display: block;
}
.failed .page-wrap {
  display: none;
}

.ir {
  background-color: transparent;
  border: 0;
  overflow: hidden;
  *text-indent: -9999px;
}

.ir:before {
  content: "";
  display: block;
  width: 0;
  height: 150%;
}

.hidden {
  display: none !important;
  visibility: hidden;
}

.visuallyhidden {
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.visuallyhidden.focusable:active,
.visuallyhidden.focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.invisible {
  visibility: hidden;
}

.clearfix {
  *zoom: 1;
}
.clearfix:after {
  clear: both;
}
.clearfix:before, .clearfix:after {
  content: " ";
  display: table;
}

/* .loader {
  @include transform(translate(-50%, 50%));
  display: none;
  position: relative;
  top: 70%;
  left: 50%;
  width: 80%;
  height: 80%;
} */
#loader {
  -webkit-transition: opacity 0.15s ease-out;
  -moz-transition: opacity 0.15s ease-out;
  -o-transition: opacity 0.15s ease-out;
  transition: opacity 0.15s ease-out;
  opacity: 0;
  position: fixed;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: -10;
}
#loader .spinner {
  display: none;
}

#loader.loading {
  z-index: 4;
  opacity: 1;
  background: #FAFAFA;
}
#loader.loading .spinner {
  display: block;
}

.spinner {
  -ms-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
  position: absolute;
  width: 30px;
  height: 30px;
  top: 50%;
  left: 50%;
}
.spinner .blob {
  position: absolute;
  top: 50%;
  left: 50%;
  -ms-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
  border: 2px solid #6aa7de;
  width: 10px;
  height: 10px;
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
}
.spinner .blob.top {
  top: 0;
  animation: blob-top 1s infinite ease-in;
}
.spinner .blob.bottom {
  top: 100%;
  animation: blob-bottom 1s infinite ease-in;
}
.spinner .blob.left {
  left: 0;
  animation: blob-left 1s infinite ease-in;
}
.spinner .move-blob {
  background: black;
  top: 0;
  animation: blob-spinner-mover 1s infinite ease-in;
}

#no-results {
  display: none;
}

.failed #no-results {
  -ms-transform: translate(-50%, -50%);
  -webkit-transform: translate(-50%, -50%);
  transform: translate(-50%, -50%);
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  z-index: 4;
  font-size: 2.5rem;
  line-height: 1;
  padding: 2rem;
  display: block;
  position: absolute;
  width: 75%;
  top: 50%;
  left: 50%;
  text-align: center;
  border: 1px solid;
}

@keyframes blob-bottom {
  25%, 50%, 75% {
    top: 50%;
    left: 100%;
  }
  100% {
    top: 0;
    left: 50%;
  }
}
@keyframes blob-left {
  25% {
    top: 50%;
    left: 0;
  }
  50%, 100% {
    top: 100%;
    left: 50%;
  }
}
@keyframes blob-top {
  50% {
    top: 0;
    left: 50%;
  }
  75%, 100% {
    top: 50%;
    left: 0;
  }
}
@keyframes blob-spinner-mover {
  0%, 100% {
    top: 0;
    left: 50%;
  }
  25% {
    top: 50%;
    left: 100%;
  }
  50% {
    top: 100%;
    left: 50%;
  }
  75% {
    top: 50%;
    left: 0;
  }
}
.search-wrap {
  -ms-transform: translateY(0);
  -webkit-transform: translateY(0);
  transform: translateY(0);
  position: fixed;
  top: 30%;
  left: 0;
  max-width: 100%;
  margin: 0;
  width: 100%;
  height: 100%;
  z-index: 3;
}
@media all and (min-width: 540px) {
  .search-wrap {
    top: 0;
  }
}
.done .search-wrap {
  -ms-transform: translateY(-100%);
  -webkit-transform: translateY(-100%);
  transform: translateY(-100%);
  display: block;
}
.emerge .done .search-wrap {
  z-index: 3;
  width: 100%;
  height: 100%;
  -ms-transform: translateY(0);
  -webkit-transform: translateY(0);
  transform: translateY(0);
}
.failed .search-wrap {
  display: none;
}

.search {
  background-color: #FAFAFA;
  padding: 1rem;
  display: block;
  margin-left: auto;
  margin-right: auto;
  position: relative;
}
@media all and (min-width: 480px) {
  .search {
    box-shadow: 0 0 3px rgba(0, 0, 0, 0.25);
    -webkit-border-radius: 0.2rem;
    -moz-border-radius: 0.2rem;
    border-radius: 0.2rem;
    /* WTF Why more?!  Some weird bug on Samsung
       Galaxy S4 Android 4.2 browsers.
         Not exactly a high use-case so remove if desired.*/
    border-left-top-radius: 0.2rem;
    border-right-top-radius: 0.2rem;
    border-right-bottom-radius: 0.2rem;
    border-left-bottom-radius: 0.2rem;
    width: 28rem;
    bottom: 0;
  }
  .search:before, .search:after {
    bottom: 26px;
    box-shadow: 0 28px 8px rgba(0, 0, 0, 0.25);
    content: "";
    height: 28px;
    position: absolute;
    width: 48%;
    z-index: -1;
  }
  .search:before {
    left: 2%;
    transform: rotate(-3deg);
  }
  .search:after {
    right: 2%;
    transform: rotate(3deg);
  }
}
@media all and (min-width: 768px) {
  .search {
    width: 40rem;
    margin-top: 12rem;
  }
}
.failed .search {
  display: none;
}

.query, .send {
  position: relative;
  display: block;
  float: none;
  clear: both;
  margin: 1rem auto;
  outline: 0;
}

.query {
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  padding: .75rem;
  max-width: 100%;
  outline: 0;
  border: 1px solid #FF9E00;
  background: transparent;
  color: #232323;
  font-size: 1.5rem;
}
.query:focus, .query:active {
  outline: 0;
}
@media all and (min-width: 768px) {
  .query {
    -webkit-border-radius: 0.2rem;
    -moz-border-radius: 0.2rem;
    border-radius: 0.2rem;
    /* WTF Why more?!  Some weird bug on Samsung
       Galaxy S4 Android 4.2 browsers.
         Not exactly a high use-case so remove if desired.*/
    border-left-top-radius: 0.2rem;
    border-right-top-radius: 0.2rem;
    border-right-bottom-radius: 0.2rem;
    border-left-bottom-radius: 0.2rem;
    border-left-color: transparent;
    border-right-color: transparent;
    border-top-color: transparent;
    width: 34rem;
  }
}
.query::-webkit-input-placeholder {
  display: inline;
  width: 100%;
  white-space: normal;
  opacity: .5;
  font-size: inherit;
  /* @media all and (min-width: 768px) {
  } */
}
.query::-moz-input-placeholder {
  display: inline;
  width: 100%;
  white-space: normal;
  opacity: .5;
  font-size: inherit;
  /* @media all and (min-width: 768px) {
  } */
}

.send {
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  display: block;
  color: #FEFEFE;
  position: relative;
  clear: both;
  text-align: center;
  background-color: #FF9E00;
  border: none;
  font-size: 2.25rem;
  margin: 1rem auto 0;
  padding: 0.5rem;
  border-bottom: 1px solid #663f00;
  /*#22313F*/
  border-top: 1px solid white;
  /*#C8F7C5*/
  -ms-transform: translateX(-50%);
  -webkit-transform: translateX(-50%);
  transform: translateX(-50%);
  position: absolute;
  top: 100%;
  left: 50%;
  /* text-shadow: 0 1px 0 $shadow-color; */
  width: 100%;
  max-width: 14rem;
  /* 18rem before */
}
.send.content {
  max-width: 90%;
  width: 100%;
}
.send.loading {
  background: none;
  border: none;
}
.send:active {
  border-bottom-color: transparent;
  border-top-color: #4d2f00;
  text-shadow: 0 -1px 0 black, 0 0 1px black;
}
.send:hover {
  background-color: rgba(255, 187, 77, 0.75);
}

.search-restore {
  display: none;
}
.no-svg .search-restore svg#ico {
  outline: 0;
  display: none;
  fill: transparent;
  stroke: none;
}
.no-svg .search-restore:after {
  display: inline;
  content: url(img/search.png);
  position: relative;
}
.search-restore #ico {
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  border: 2px solid #232323;
  padding: 8px;
}
.done .search-restore {
  position: fixed;
  display: block;
  width: 3.5rem;
  height: 3.5rem;
  top: 1rem;
  right: 1rem;
  z-index: 3;
}
.done .search-restore svg {
  fill: #FEFEFE;
  background-color: #082642;
}
.done .search-restore:hover svg {
  background-color: #438ED1;
}
.done .search-restore:focus, .done .search-restore:active {
  outline: 0;
}

.results {
  position: relative;
}

.related-label {
  padding: 1rem;
  display: none;
}
.done .related-label {
  display: block;
}
.failed .related-label {
  display: none;
}

.related {
  position: relative;
  margin: 0 auto;
  padding: 1rem;
  width: 90%;
  list-style: none;
  flex-direction: row;
  justify-content: center;
  flex-wrap: wrap;
  border: none;
  /**
   * Turn this off until we can handle
   * the filter on huge amounts of results.
   */
  /*&.sticky {
    @include box-shadow(0, 1px, 6px, 0, $shadow-color);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
//    height: 3rem;
    background-color: $bg-color;
    //    height: 3rem;
    z-index: 2;
    @media all and (min-width: 768px) {
      padding-right: 5rem;
    }
  }*/
  display: none;
}
.done .related {
  display: flex;
}
.failed .related {
  display: none;
}

.result {
  color: #7F7F7F;
}
.result em {
  color: #205A8F;
  font-style: normal;
}

.related .doc {
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  flex-grow: 1;
  margin: 5px 1rem 5px 0;
  text-align: center;
  border: 1px solid transparent;
  padding: 3px 5px;
  font-size: 1.25rem;
  font-weight: 200;
  /**
   * Turn this off until we can handle
   * the filter on huge amounts of results.
   */
  /*cursor: pointer;*/
}
.related .doc.pretty {
  font-weight: 700;
  border-width: 3px;
}

/* .filtered {
  .doc {
    opacity: .35;
    &.selected {
      opacity: 1;
      &:hover {
        opacity: 1;
      }
    }
    &:hover {
      opacity: .65;
    }
  }
  .content {
    display: none;
    .number {
      display: none;
    }
    .text, .details {
      display: none;
    }
    .info {
      pointer-events: none;
    }
    &.selected {
      display: block;
      .number {
        display: block;
      }
      .text, .details {
        display: block;
      }
      .info {
        pointer-events: all;
      }
    }
  }
} */
.content {
  margin-bottom: 2rem;
  position: relative;
}
.content:hover .info:hover .pub, .content:hover .info:hover .title {
  border-bottom-color: #205A8F;
  /* .filtered & {
    border-bottom-color: transparent;
    .selected & {
      border-bottom-color: $result-color;
    }
  } */
}
.content.pretty .text {
  padding-left: 2rem;
  border-left: 3px solid;
}
@media all and (min-width: 768px) {
  .content {
    padding-left: 3rem;
    padding-right: 3rem;
  }
}

.number {
  background-color: #438ED1;
  background-image: radial-gradient(transparent 30%, rgba(0, 0, 0, 0.2));
  color: #FEFEFE;
  font-size: 1.2rem;
  /*font-weight: bold;*/
  text-shadow: -1px -1px 1px rgba(0, 0, 0, 0.2);
  border-width: 1px 1px 2px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);
  margin: 0;
  padding: .25rem 2.5rem;
  position: absolute;
  top: .75rem;
  right: -14px;
  margin-right: -2rem;
  overflow: hidden;
}
.number:after {
  border-width: 7px;
  border-style: solid;
  border-top-color: #7F7F7F;
  border-bottom-color: transparent;
  bottom: -15px;
  content: "";
  position: absolute;
}
.number:after {
  right: -1px;
  border-left-color: #7F7F7F;
  border-right-color: transparent;
}
.number .climb-up, .number .look-inside, .number .do-both {
  display: none;
}
.number:hover {
  /*.climb-up, .look-inside, .do-both {
    @include miniButton($black, .125rem .375rem);
    float: left;
    clear: none;
    margin: auto 2rem auto 0;
    cursor: pointer;
  }*/
}

.text {
  text-rendering: optimizeLegibility;
  color: #666666;
  font-family: Ubuntu, Cantarell, "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", "Open Sans", Helvetica, "Trebuchet MS", Arial, "Lucida Grande", sans-serif;
  position: relative;
  font-size: 1.2rem;
  clear: both;
  margin-top: 4rem;
  margin-bottom: 1rem;
  padding-top: 2rem;
}
.text q:before {
  position: absolute;
  right: 100%;
}
.text q:after {
  position: absolute;
  left: 100%;
}
.text .reveal {
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  display: inline;
  font-size: 75%;
  margin: 0;
  border: 1px solid;
  padding: 0.4rem 0.6rem;
  background-color: #205A8F;
  color: #FEFEFE;
  position: relative;
  /*&:hover {
    background-color: transparent;
    color: $action-color;
  }*/
}
.text .combined {
  display: none;
}
.text .parts {
  display: block;
}
.text.opened .parts {
  display: none;
}
.text.opened .combined {
  display: inline;
}
.text.opened .reveal {
  color: #205A8F;
  background-color: transparent;
  /*&:hover {
    color: $white;
    background-color: $action-color;
  }*/
}
@media all and (min-width: 480px) {
  .text {
    font-size: 1.2rem;
  }
}
@media all and (min-width: 768px) {
  .text {
    font-size: 1.6rem;
    margin-left: auto;
    margin-right: auto;
  }
}
@media all and (min-width: 1140px) {
  .text {
    font-size: 1.4rem;
  }
}

.meta {
  max-width: 100%;
  width: 100%;
  position: relative;
  color: #7F7F7F;
  font-family: Ubuntu, Cantarell, "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", "Open Sans", Helvetica, "Trebuchet MS", Arial, "Lucida Grande", sans-serif;
  font-size: 1rem;
}

.details {
  float: left;
  max-width: 50%;
  overflow: hidden;
  margin-left: 0;
  margin-right: 0;
  text-align: left;
}
.details .chapter, .details .section {
  font-size: .75rem;
}
.details .chapter .title, .details .section .title {
  font-size: .875rem;
}

.info {
  float: right;
  position: relative;
  max-width: 50%;
  overflow: hidden;
  margin-left: 0;
  margin-right: 0;
  text-align: right;
  color: inherit;
  display: block;
}
.info .pub, .info .title {
  border-bottom: 1px solid transparent;
  color: #205A8F;
}
.filtered .info .pub, .filtered .info .title {
  color: inherit;
}
.selected .filtered .info .pub, .selected .filtered .info .title {
  color: #205A8F;
}
.info .pub {
  font-size: 75%;
}
.info .title {
  font-size: .875rem;
}

.more {
  -webkit-border-radius: 0.2rem;
  -moz-border-radius: 0.2rem;
  border-radius: 0.2rem;
  /* WTF Why more?!  Some weird bug on Samsung
     Galaxy S4 Android 4.2 browsers.
       Not exactly a high use-case so remove if desired.*/
  border-left-top-radius: 0.2rem;
  border-right-top-radius: 0.2rem;
  border-right-bottom-radius: 0.2rem;
  border-left-bottom-radius: 0.2rem;
  display: block;
  color: #FEFEFE;
  position: relative;
  clear: both;
  text-align: center;
  background-color: #205A8F;
  border: none;
  font-size: 2.25rem;
  margin: 1rem auto 0;
  padding: 1.25rem;
  border-bottom: 1px solid #040b12;
  /*#22313F*/
  border-top: 1px solid #bed8f0;
  /*#C8F7C5*/
  position: absolute;
  bottom: 2rem;
  display: none;
}
.more.content {
  max-width: 90%;
  width: 100%;
}
.more.loading {
  background: none;
  border: none;
}
.more:active {
  border-bottom-color: transparent;
  border-top-color: black;
  text-shadow: 0 -1px 0 black, 0 0 1px black;
}
.more:hover {
  background-color: rgba(46, 129, 206, 0.75);
}
.done .more {
  display: block;
}
.failed .more {
  display: none;
}

.summary {
  text-rendering: optimizeLegibility;
  color: #7F7F7F;
  font-weight: 200;
  text-align: center;
  margin: 2rem auto;
  display: none;
}
.done .summary {
  display: block;
}
.failed .summary {
  display: none;
}

.term {
  font-size: 2.5rem;
  color: #2e282a;
}

.total, .count {
  /*color: $action-color;*/
  color: #2e282a;
}

.infini-check {
  display: none;
}
.infini-check input {
  display: none;
}
.done .infini-check {
  display: block;
}
.failed .infini-check {
  display: none;
}

#infini-status {
  -webkit-transition: opacity 0.075s ease-out;
  -moz-transition: opacity 0.075s ease-out;
  -o-transition: opacity 0.075s ease-out;
  transition: opacity 0.075s ease-out;
  max-width: 8rem;
  max-height: 3.2rem;
  width: 100%;
  height: 100%;
  display: table;
  color: #63B257;
  pointer-events: none;
  z-index: -1;
  opacity: 0;
}
@media all and (min-width: 480px) {
  #infini-status {
    pointer-events: auto;
    z-index: 3;
    opacity: 1;
  }
}
#infini-status:after {
  display: table-cell;
  position: absolute;
  content: 'Infinite Scroll';
  background-color: #FEFEFE;
  word-wrap: normal;
  border: 2px solid;
  border-left: none;
  top: 0;
  left: calc(100% - 2px);
  padding-left: 1rem;
  padding-right: 1rem;
}

.disabled #infini-status {
  color: #AAAAAA;
}

#infini-label {
  /* @include iconInfini; */
  cursor: pointer;
  position: fixed;
  top: 1rem;
  left: 1rem;
  z-index: 3;
  width: 3.2rem;
  height: 3.2rem;
  display: table;
}
#infini-label svg {
  -webkit-transition: all 0.075s ease-out;
  -moz-transition: all 0.075s ease-out;
  -o-transition: all 0.075s ease-out;
  transition: all 0.075s ease-out;
  position: absolute;
  left: 0;
  top: 0;
  background-color: #63B257;
}
#infini-label svg path {
  fill: #FEFEFE;
}
#infini-label svg rect {
  stroke: #63B257 !important;
}
#infini-label:hover svg {
  background-color: #FEFEFE;
}
#infini-label:hover svg path {
  fill: #AAAAAA;
}
#infini-label:hover svg rect {
  stroke: #AAAAAA !important;
}
#infini-label:hover #infini-status {
  color: #AAAAAA;
  opacity: 1;
}
#infini-label:hover #infini-status:after {
  border-color: #AAAAAA;
}
#infini-label.disabled svg {
  background-color: #FEFEFE;
}
#infini-label.disabled svg path {
  fill: #7F7F7F;
}
#infini-label.disabled svg rect {
  stroke: transparent !important;
}
#infini-label.disabled:hover svg {
  background-color: #FEFEFE;
}
#infini-label.disabled:hover svg path {
  fill: #63B257;
}
#infini-label.disabled:hover svg rect {
  stroke: #63B257 !important;
}
#infini-label.disabled:hover #infini-status {
  z-index: -1;
  pointer-events: none;
  opacity: 0;
  color: #63B257;
}
#infini-label.disabled:hover #infini-status:after {
  border-color: #63B257;
}

</style>

  </head>
  <body>

  <script type="text/javascript">
    document.documentElement.removeAttribute("class");
  </script>
  <!--[if lte IE 9]>
  <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
  <![endif]-->

  <div class="loader" id="loader">
    <div class="spinner">
      <div class="blob top"></div>
      <div class="blob bottom"></div>
      <div class="blob left"></div>
      <div class="blob move-blob"></div>
    </div>
  </div>

  <div class="wrapper search-wrap" id="search-wrap">
    <div class="search" id="search">
      <header class="search-title">
        <h1>Find the needle.</h1>
      </header>
      <input type="text" name="query" class="query" id="query" placeholder="Ex: dawg msme sgp" autofocus tabindex="0" autocomplete="off" data-control="input" />
      <noscript><p>Clicking this button is just gonna disappoint you.</p></noscript>
      <a href="#page" class="send" id="send"><span class="action">go</span></a>
    </div>
  </div>

  <a href="#" id="search-restore" class="search-restore" data-control="button">
    <!-- Created with Inkscape (http://www.inkscape.org/) -->
    <svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 512 512" height="48" id="ico" version="1.2" viewBox="0 0 512 512" width="48" xml:space="preserve"><path d="M498 498c-19 19-49 19-68 0l-85-85c-35 22-76 36-121 36C100 449 0 348 0 224S100 0 224 0c124 0 224 100 224 224 0 45-13 86-36 121l85 85C517 449 517 479 498 498zM224 64c-89 0-160 72-160 160 0 89 72 160 160 160 89 0 160-72 160-160C385 136 313 64 224 64z"/></svg>
  </a>

  <div class="wrapper full-wrap" id="wrap">

    <h2 class="related-label label">
      Related Documents
      <!-- <br/>
      <small>(click to filter locally, press ESC to reset)</small> -->
    </h2>
    <ul class="related" id="related"></ul>
    <hr/>

    <div class="wrapper summary" id="summary">
      <!-- You searched for -->
      <h2><q class="term" id="term"></q></h2>
      <h3>showing <span class="count" id="count"></span> of <span class="total" id="total"></span> results</h3>
    </div>
    <div class="wrapper page-wrap" id="page">
      <a href="#" class="more meta hidden" id="more-meta" data-control="button">fetch »</a>
      <div class="results" id="results"></div>
      <a href="#" class="more content" id="more-content"><span class="action">more, please</span></a>
    </div>
  </div>

  <div class="infini-check">
    <label for="infini-scroll" id="infini-label" title="Infinite scroll enabled">
    <!-- Created with Inkscape (http://www.inkscape.org/) -->
      <svg xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" version="1.1" width="48" height="48"><g transform="translate(0,-1004)"><path d="m27.17 1045c2.19-3 3.83-7 3.83-11 0-1-0.42-1-2.81-1-3.37 0-3.57-1-0.7-4 0 0 0 0 2.4-3 0 0 1.43-2 2.53-3 1.82-2 1.82-2 3.63 0 1.59 2 3.74 5 4.93 6 2.87 3 2.67 4-0.7 4-2.36 0-2.82 0-2.82 1 0 5-5.34 10-10.11 13-2.35 1-2.35 1-0.18-2zM12.8 1034c-1.44-2-1.54-2-1.54-2-1.24-2-3.112-4-3.112-4-2.871-3-2.671-4 0.697-4 2.365 0 2.825 0 2.825-1 0-5 4.09-10 10.68-13 4.35-1 2.83-1-0.39 2-1.81 3-3.83 7-3.84 11 0 1 0.43 1 2.82 1 3.37 0 3.57 1 0.7 4 0 0 0 0-3.12 4-0.62 1 0 0-1.53 2-0.85 1-1.79 2-2.1 2-0.31 0-1.25-1-2.09-2z" fill="#333"/><rect width="46.2" height="46.06" ry="1.894" x="0.959" y="1005" style="fill:none;stroke-linejoin:round;stroke-width:1.922;stroke:#000"/></g></svg>

      <input type="checkbox" id="infini-scroll" name="infini-scroll" checked data-control="setting" />
      <span id="infini-status" class="enabled"></span>
    </label>
  </div>

  <a href="index.html" id="no-results">No results buddy.  Try it again.</a>


    <script type="text/template" id="related-template">
      <li class="result doc<%= gravitas %>" data-score="<%= score %>" id="<%= key %>">
        <%= key %>
      </li>
    </script>

    <script type="text/template" id="result-template">
      <div class="result<%= type %><%= gravitas %> clearfix" data-score="<%= score %>" data-pub="<%= fullPub %>">
        <% if ( type === " content" ) { %>
        <div class="text clearfix">
          <% if ( parts && concatText ) { %>
            <span class="combined"><%= concatText %><br/></span>
            <span class="parts"><%  var i = 0, count = parts.length;
                for (; i < count; ++i) {
                  if ( count > 1 || concatText.length > parts[0].length ) { %>
                    <q>...<%= parts[i] %>...</q><br/>
                  <% } else { %>
                    <%= parts[0] %><br/>
                  <% } %>
                <% } %></span>
            <% if ( count > 1 || concatText.length > parts[0].length ) { %><a href="#" class="reveal">expand to full paragraph</a><% } %>
          <% } else { %>
            <span class="combined"><%= rawText %></span>
            <span class="parts"><%= _.trunc(rawText, { length: 100 }) %></span>
            <a href="#" class="reveal">expand to full paragraph</a>
          <% } %>
        </div>
        <h2 class="number">
          <%= sub %>
          <span class="climb-up reveal">climb up</span>
          <span class="look-inside reveal">look inside</span>
          <span class="do-both reveal">do both</span>
        </h2>
        <div class="meta">
          <div class="details">
            <% if ( details && details.chapter && details.chapterTitle ) { %>
            <span class="chapter">Chapter <%= details.chapter %><br/><span class="title"><%= details.chapterTitle %></span></span><br/>
            <% } if ( details && details.section && details.sectionTitle ) { %>
            <span class="section">Section <%= details.section %><br/><span class="title"><%= details.sectionTitle %></span></span><br/>
            <% } %>
          </div>
          <a class="info" href="<%= url %>" title="<%= date %>" download="<%= fullPub %>.pdf" target="_blank">
            <span class="pub"><%= fullPub %></span><br/>
            <span class="title"><%= title %></span>
          </a>
        </div>
        <% } else { %>
        <a class="info" href="<%= url %>" title="<%= date %>" download="<%= fullPub %>.pdf" target="_blank">
          <span class="pub"><%= fullPub %></span><br/>
          <span class="title"><%= title %></span>
        </a>
        <% } %>
      </div>
    </script>
    <script>
(function() {
  var undefined;
  var VERSION = "3.2.0";
  var DEFAULT_TRUNC_LENGTH = 30, DEFAULT_TRUNC_OMISSION = "...";
  var argsTag = "[object Arguments]", arrayTag = "[object Array]", boolTag = "[object Boolean]", dateTag = "[object Date]", errorTag = "[object Error]", funcTag = "[object Function]", numberTag = "[object Number]", objectTag = "[object Object]", regexpTag = "[object RegExp]", stringTag = "[object String]";
  var reEmptyStringLeading = /\b__p \+= '';/g, reEmptyStringMiddle = /\b(__p \+=) '' \+/g, reEmptyStringTrailing = /(__e\(.*?\)|\b__t\)) \+\n'';/g;
  var reUnescapedHtml = /[&<>"'`]/g, reHasUnescapedHtml = RegExp(reUnescapedHtml.source);
  var reEscape = /<%-([\s\S]+?)%>/g, reEvaluate = /<%([\s\S]+?)%>/g, reInterpolate = /<%=([\s\S]+?)%>/g;
  var reEsTemplate = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;
  var reFlags = /\w*$/;
  var reHostCtor = /^\[object .+?Constructor\]$/;
  var reNoMatch = /($^)/;
  var reRegExpChars = /[.*+?^${}()|[\]\/\\]/g, reHasRegExpChars = RegExp(reRegExpChars.source);
  var reThis = /\bthis\b/;
  var reUnescapedString = /['\n\r\u2028\u2029\\]/g;
  var shadowProps = [ "constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf" ];
  var templateCounter = -1;
  var htmlEscapes = {
    "&": "&amp;",
    "<": "&lt;",
    ">": "&gt;",
    '"': "&quot;",
    "'": "&#39;",
    "`": "&#96;"
  };
  var objectTypes = {
    "function": true,
    object: true
  };
  var stringEscapes = {
    "\\": "\\",
    "'": "'",
    "\n": "n",
    "\r": "r",
    "\u2028": "u2028",
    "\u2029": "u2029"
  };
  var root = objectTypes[typeof window] && window !== (this && this.window) ? window : this;
  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;
  var freeModule = objectTypes[typeof module] && module && !module.nodeType && module;
  var freeGlobal = freeExports && freeModule && typeof global == "object" && global;
  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {
    root = freeGlobal;
  }
  var moduleExports = freeModule && freeModule.exports === freeExports && freeExports;
  function baseIndexOf(array, value, fromIndex) {
    if (value !== value) {
      return indexOfNaN(array, fromIndex);
    }
    var index = (fromIndex || 0) - 1, length = array.length;
    while (++index < length) {
      if (array[index] === value) {
        return index;
      }
    }
    return -1;
  }
  function baseToString(value) {
    if (typeof value == "string") {
      return value;
    }
    return value == null ? "" : value + "";
  }
  function charsLeftIndex(string, chars) {
    var index = -1, length = string.length;
    while (++index < length && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }
  function charsRightIndex(string, chars) {
    var index = string.length;
    while (index-- && chars.indexOf(string.charAt(index)) > -1) {}
    return index;
  }
  function escapeHtmlChar(chr) {
    return htmlEscapes[chr];
  }
  function escapeStringChar(chr) {
    return "\\" + stringEscapes[chr];
  }
  function indexOfNaN(array, fromIndex, fromRight) {
    var length = array.length, index = fromRight ? fromIndex || length : (fromIndex || 0) - 1;
    while (fromRight ? index-- : ++index < length) {
      var other = array[index];
      if (other !== other) {
        return index;
      }
    }
    return -1;
  }
  var isHostObject = function() {
    try {
      Object({
        toString: 0
      } + "");
    } catch (e) {
      return function() {
        return false;
      };
    }
    return function(value) {
      return typeof value.toString != "function" && typeof (value + "") == "string";
    };
  }();
  function isObjectLike(value) {
    return value && typeof value == "object" || false;
  }
  function isSpace(charCode) {
    return charCode <= 160 && (charCode >= 9 && charCode <= 13) || charCode == 32 || charCode == 160 || charCode == 5760 || charCode == 6158 || charCode >= 8192 && (charCode <= 8202 || charCode == 8232 || charCode == 8233 || charCode == 8239 || charCode == 8287 || charCode == 12288 || charCode == 65279);
  }
  function trimmedLeftIndex(string) {
    var index = -1, length = string.length;
    while (++index < length && isSpace(string.charCodeAt(index))) {}
    return index;
  }
  function trimmedRightIndex(string) {
    var index = string.length;
    while (index-- && isSpace(string.charCodeAt(index))) {}
    return index;
  }
  var arrayProto = Array.prototype, errorProto = Error.prototype, objectProto = Object.prototype, stringProto = String.prototype;
  var fnToString = Function.prototype.toString;
  var hasOwnProperty = objectProto.hasOwnProperty;
  var objToString = objectProto.toString;
  var reNative = RegExp("^" + escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g, "$1.*?") + "$");
  var floor = Math.floor, propertyIsEnumerable = objectProto.propertyIsEnumerable, splice = arrayProto.splice, Uint8Array = isNative(Uint8Array = root.Uint8Array) && Uint8Array;
  var nativeIsArray = isNative(nativeIsArray = Array.isArray) && nativeIsArray, nativeKeys = isNative(nativeKeys = Object.keys) && nativeKeys, nativeMax = Math.max, nativeMin = Math.min;
  var MAX_ARRAY_LENGTH = Math.pow(2, 32) - 1, MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1, HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;
  var MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;
  var nonEnumProps = {};
  nonEnumProps[arrayTag] = nonEnumProps[dateTag] = nonEnumProps[numberTag] = {
    constructor: true,
    toLocaleString: true,
    toString: true,
    valueOf: true
  };
  nonEnumProps[boolTag] = nonEnumProps[stringTag] = {
    constructor: true,
    toString: true,
    valueOf: true
  };
  nonEnumProps[errorTag] = nonEnumProps[funcTag] = nonEnumProps[regexpTag] = {
    constructor: true,
    toString: true
  };
  nonEnumProps[objectTag] = {
    constructor: true
  };
  arrayEach(shadowProps, function(key) {
    for (var tag in nonEnumProps) {
      if (hasOwnProperty.call(nonEnumProps, tag)) {
        var props = nonEnumProps[tag];
        props[key] = hasOwnProperty.call(props, key);
      }
    }
  });
  function lodash() {}
  var support = lodash.support = {};
  (function(x) {
    var Ctor = function() {
      this.x = 1;
    }, object = {
      "0": 1,
      length: 1
    }, props = [];
    Ctor.prototype = {
      valueOf: 1,
      y: 1
    };
    for (var key in new Ctor()) {
      props.push(key);
    }
    support.argsTag = objToString.call(arguments) == argsTag;
    support.enumErrorProps = propertyIsEnumerable.call(errorProto, "message") || propertyIsEnumerable.call(errorProto, "name");
    support.enumPrototypes = propertyIsEnumerable.call(Ctor, "prototype");
    support.funcDecomp = !isNative(root.WinRTError) && reThis.test(function() {
      return this;
    });
    support.funcNames = typeof Function.name == "string";
    support.nonEnumStrings = !propertyIsEnumerable.call("x", 0);
    support.nonEnumShadows = !/valueOf/.test(props);
    support.spliceObjects = (splice.call(object, 0, 1), !object[0]);
    support.unindexedChars = "x"[0] + Object("x")[0] != "xx";
    try {
      support.nonEnumArgs = !propertyIsEnumerable.call(arguments, 1);
    } catch (e) {
      support.nonEnumArgs = true;
    }
  })(0, 0);
  lodash.templateSettings = {
    escape: reEscape,
    evaluate: reEvaluate,
    interpolate: reInterpolate,
    variable: "",
    imports: {
      _: lodash
    }
  };
  function arrayEach(array, iteratee) {
    var index = -1, length = array.length;
    while (++index < length) {
      if (iteratee(array[index], index, array) === false) {
        break;
      }
    }
    return array;
  }
  function assignOwnDefaults(objectValue, sourceValue, key, object) {
    return typeof objectValue == "undefined" || !hasOwnProperty.call(object, key) ? sourceValue : objectValue;
  }
  function baseAssign(object, source, customizer) {
    var props = keys(source);
    if (!customizer) {
      return baseCopy(source, object, props);
    }
    var index = -1, length = props.length;
    while (++index < length) {
      var key = props[index], value = object[key], result = customizer(value, source[key], key, object, source);
      if ((result === result ? result !== value : value === value) || typeof value == "undefined" && !(key in object)) {
        object[key] = result;
      }
    }
    return object;
  }
  function baseCopy(source, object, props) {
    if (!props) {
      props = object;
      object = {};
    }
    var index = -1, length = props.length;
    while (++index < length) {
      var key = props[index];
      object[key] = source[key];
    }
    return object;
  }
  function baseSlice(array, start, end) {
    var index = -1, length = array.length;
    start = start == null ? 0 : +start || 0;
    if (start < 0) {
      start = -start > length ? 0 : length + start;
    }
    end = typeof end == "undefined" || end > length ? length : +end || 0;
    if (end < 0) {
      end += length;
    }
    length = start > end ? 0 : end - start >>> 0;
    start >>>= 0;
    var result = Array(length);
    while (++index < length) {
      result[index] = array[index + start];
    }
    return result;
  }
  function baseValues(object, props) {
    var index = -1, length = props.length, result = Array(length);
    while (++index < length) {
      result[index] = object[props[index]];
    }
    return result;
  }
  function binaryIndex(array, value, retHighest) {
    var low = 0, high = array ? array.length : low;
    if (typeof value == "number" && value === value && high <= HALF_MAX_ARRAY_LENGTH) {
      while (low < high) {
        var mid = low + high >>> 1, computed = array[mid];
        if (retHighest ? computed <= value : computed < value) {
          low = mid + 1;
        } else {
          high = mid;
        }
      }
      return high;
    }
    return binaryIndexBy(array, value, identity, retHighest);
  }
  function binaryIndexBy(array, value, iteratee, retHighest) {
    value = iteratee(value);
    var low = 0, high = array ? array.length : 0, valIsNaN = value !== value, valIsUndef = typeof value == "undefined";
    while (low < high) {
      var mid = floor((low + high) / 2), computed = iteratee(array[mid]), isReflexive = computed === computed;
      if (valIsNaN) {
        var setLow = isReflexive || retHighest;
      } else if (valIsUndef) {
        setLow = isReflexive && (retHighest || typeof computed != "undefined");
      } else {
        setLow = retHighest ? computed <= value : computed < value;
      }
      if (setLow) {
        low = mid + 1;
      } else {
        high = mid;
      }
    }
    return nativeMin(high, MAX_ARRAY_INDEX);
  }
  function getIndexOf(collection, target, fromIndex) {
    var result = lodash.indexOf || indexOf;
    result = result === indexOf ? baseIndexOf : result;
    return collection ? result(collection, target, fromIndex) : result;
  }
  function isIndex(value, length) {
    value = +value;
    length = length == null ? MAX_SAFE_INTEGER : length;
    return value > -1 && value % 1 == 0 && value < length;
  }
  function isIterateeCall(value, index, object) {
    if (!isObject(object)) {
      return false;
    }
    var type = typeof index;
    if (type == "number") {
      var length = object.length, prereq = isLength(length) && isIndex(index, length);
    } else {
      prereq = type == "string" && index in object;
    }
    return prereq && object[index] === value;
  }
  function isLength(value) {
    return typeof value == "number" && value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
  }
  function shimKeys(object) {
    var props = keysIn(object), propsLength = props.length, length = propsLength && object.length, support = lodash.support;
    var allowIndexes = length && isLength(length) && (isArray(object) || support.nonEnumStrings && isString(object) || support.nonEnumArgs && isArguments(object));
    var index = -1, result = [];
    while (++index < propsLength) {
      var key = props[index];
      if (allowIndexes && isIndex(key, length) || hasOwnProperty.call(object, key)) {
        result.push(key);
      }
    }
    return result;
  }
  function indexOf(array, value, fromIndex) {
    var length = array ? array.length : 0;
    if (!length) {
      return -1;
    }
    if (typeof fromIndex == "number") {
      fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex || 0;
    } else if (fromIndex) {
      var index = binaryIndex(array, value), other = array[index];
      return (value === value ? value === other : other !== other) ? index : -1;
    }
    return baseIndexOf(array, value, fromIndex);
  }
  function includes(collection, target, fromIndex) {
    var length = collection ? collection.length : 0;
    if (!isLength(length)) {
      collection = values(collection);
      length = collection.length;
    }
    if (!length) {
      return false;
    }
    if (typeof fromIndex == "number") {
      fromIndex = fromIndex < 0 ? nativeMax(length + fromIndex, 0) : fromIndex || 0;
    } else {
      fromIndex = 0;
    }
    return typeof collection == "string" || !isArray(collection) && isString(collection) ? fromIndex < length && collection.indexOf(target, fromIndex) > -1 : getIndexOf(collection, target, fromIndex) > -1;
  }
  function isArguments(value) {
    var length = isObjectLike(value) ? value.length : undefined;
    return isLength(length) && objToString.call(value) == argsTag || false;
  }
  if (!support.argsTag) {
    isArguments = function(value) {
      var length = isObjectLike(value) ? value.length : undefined;
      return isLength(length) && hasOwnProperty.call(value, "callee") && !propertyIsEnumerable.call(value, "callee") || false;
    };
  }
  var isArray = nativeIsArray || function(value) {
    return isObjectLike(value) && isLength(value.length) && objToString.call(value) == arrayTag || false;
  };
  function isError(value) {
    return isObjectLike(value) && typeof value.message == "string" && objToString.call(value) == errorTag || false;
  }
  function isFunction(value) {
    return typeof value == "function" || false;
  }
  if (isFunction(/x/) || Uint8Array && !isFunction(Uint8Array)) {
    isFunction = function(value) {
      return objToString.call(value) == funcTag;
    };
  }
  function isObject(value) {
    var type = typeof value;
    return type == "function" || value && type == "object" || false;
  }
  function isNative(value) {
    if (value == null) {
      return false;
    }
    if (objToString.call(value) == funcTag) {
      return reNative.test(fnToString.call(value));
    }
    return isObjectLike(value) && (isHostObject(value) ? reNative : reHostCtor).test(value) || false;
  }
  function isNumber(value) {
    return typeof value == "number" || isObjectLike(value) && objToString.call(value) == numberTag || false;
  }
  function isRegExp(value) {
    return isObject(value) && objToString.call(value) == regexpTag || false;
  }
  function isString(value) {
    return typeof value == "string" || isObjectLike(value) && objToString.call(value) == stringTag || false;
  }
  var keys = !nativeKeys ? shimKeys : function(object) {
    if (object) {
      var Ctor = object.constructor, length = object.length;
    }
    if (typeof Ctor == "function" && Ctor.prototype === object || (typeof object == "function" ? lodash.support.enumPrototypes : length && isLength(length))) {
      return shimKeys(object);
    }
    return isObject(object) ? nativeKeys(object) : [];
  };
  function keysIn(object) {
    if (object == null) {
      return [];
    }
    if (!isObject(object)) {
      object = Object(object);
    }
    var length = object.length, support = lodash.support;
    length = length && isLength(length) && (isArray(object) || support.nonEnumStrings && isString(object) || support.nonEnumArgs && isArguments(object)) && length || 0;
    var Ctor = object.constructor, index = -1, proto = isFunction(Ctor) && Ctor.prototype || objectProto, isProto = proto === object, result = Array(length), skipIndexes = length > 0, skipErrorProps = support.enumErrorProps && (object === errorProto || object instanceof Error), skipProto = support.enumPrototypes && isFunction(object);
    while (++index < length) {
      result[index] = index + "";
    }
    for (var key in object) {
      if (!(skipProto && key == "prototype") && !(skipErrorProps && (key == "message" || key == "name")) && !(skipIndexes && isIndex(key, length)) && !(key == "constructor" && (isProto || !hasOwnProperty.call(object, key)))) {
        result.push(key);
      }
    }
    if (support.nonEnumShadows && object !== objectProto) {
      var tag = object === stringProto ? stringTag : object === errorProto ? errorTag : objToString.call(object), nonEnums = nonEnumProps[tag] || nonEnumProps[objectTag];
      if (tag == objectTag) {
        proto = objectProto;
      }
      length = shadowProps.length;
      while (length--) {
        key = shadowProps[length];
        var nonEnum = nonEnums[key];
        if (!(isProto && nonEnum) && (nonEnum ? hasOwnProperty.call(object, key) : object[key] !== proto[key])) {
          result.push(key);
        }
      }
    }
    return result;
  }
  function values(object) {
    return baseValues(object, keys(object));
  }
  function escape(string) {
    string = baseToString(string);
    return string && reHasUnescapedHtml.test(string) ? string.replace(reUnescapedHtml, escapeHtmlChar) : string;
  }
  function escapeRegExp(string) {
    string = baseToString(string);
    return string && reHasRegExpChars.test(string) ? string.replace(reRegExpChars, "\\$&") : string;
  }
  function template(string, options, otherOptions) {
    var settings = lodash.templateSettings;
    if (otherOptions && isIterateeCall(string, options, otherOptions)) {
      options = otherOptions = null;
    }
    string = baseToString(string);
    options = baseAssign(baseAssign({}, otherOptions || options), settings, assignOwnDefaults);
    var imports = baseAssign(baseAssign({}, options.imports), settings.imports, assignOwnDefaults), importsKeys = keys(imports), importsValues = baseValues(imports, importsKeys);
    var isEscaping, isEvaluating, index = 0, interpolate = options.interpolate || reNoMatch, source = "__p += '";
    var reDelimiters = RegExp((options.escape || reNoMatch).source + "|" + interpolate.source + "|" + (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + "|" + (options.evaluate || reNoMatch).source + "|$", "g");
    var sourceURL = "//# sourceURL=" + ("sourceURL" in options ? options.sourceURL : "lodash.templateSources[" + ++templateCounter + "]") + "\n";
    string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {
      interpolateValue || (interpolateValue = esTemplateValue);
      source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);
      if (escapeValue) {
        isEscaping = true;
        source += "' +\n__e(" + escapeValue + ") +\n'";
      }
      if (evaluateValue) {
        isEvaluating = true;
        source += "';\n" + evaluateValue + ";\n__p += '";
      }
      if (interpolateValue) {
        source += "' +\n((__t = (" + interpolateValue + ")) == null ? '' : __t) +\n'";
      }
      index = offset + match.length;
      return match;
    });
    source += "';\n";
    var variable = options.variable;
    if (!variable) {
      source = "with (obj) {\n" + source + "\n}\n";
    }
    source = (isEvaluating ? source.replace(reEmptyStringLeading, "") : source).replace(reEmptyStringMiddle, "$1").replace(reEmptyStringTrailing, "$1;");
    source = "function(" + (variable || "obj") + ") {\n" + (variable ? "" : "obj || (obj = {});\n") + "var __t, __p = ''" + (isEscaping ? ", __e = _.escape" : "") + (isEvaluating ? ", __j = Array.prototype.join;\n" + "function print() { __p += __j.call(arguments, '') }\n" : ";\n") + source + "return __p\n}";
    var result = attempt(function() {
      return Function(importsKeys, sourceURL + "return " + source).apply(undefined, importsValues);
    });
    result.source = source;
    if (isError(result)) {
      throw result;
    }
    return result;
  }
  function trim(string, chars, guard) {
    var value = string;
    string = baseToString(string);
    if (!string) {
      return string;
    }
    if (guard ? isIterateeCall(value, chars, guard) : chars == null) {
      return string.slice(trimmedLeftIndex(string), trimmedRightIndex(string) + 1);
    }
    chars = chars + "";
    return string.slice(charsLeftIndex(string, chars), charsRightIndex(string, chars) + 1);
  }
  function trunc(string, options, guard) {
    if (guard && isIterateeCall(string, options, guard)) {
      options = null;
    }
    var length = DEFAULT_TRUNC_LENGTH, omission = DEFAULT_TRUNC_OMISSION;
    if (options != null) {
      if (isObject(options)) {
        var separator = "separator" in options ? options.separator : separator;
        length = "length" in options ? +options.length || 0 : length;
        omission = "omission" in options ? baseToString(options.omission) : omission;
      } else {
        length = +options || 0;
      }
    }
    string = baseToString(string);
    if (length >= string.length) {
      return string;
    }
    var end = length - omission.length;
    if (end < 1) {
      return omission;
    }
    var result = string.slice(0, end);
    if (separator == null) {
      return result + omission;
    }
    if (isRegExp(separator)) {
      if (string.slice(end).search(separator)) {
        var match, newEnd, substring = string.slice(0, end);
        if (!separator.global) {
          separator = RegExp(separator.source, (reFlags.exec(separator) || "") + "g");
        }
        separator.lastIndex = 0;
        while (match = separator.exec(substring)) {
          newEnd = match.index;
        }
        result = result.slice(0, newEnd == null ? end : newEnd);
      }
    } else if (string.indexOf(separator, end) != end) {
      var index = result.lastIndexOf(separator);
      if (index > -1) {
        result = result.slice(0, index);
      }
    }
    return result + omission;
  }
  function attempt(func) {
    try {
      return func.apply(undefined, baseSlice(arguments, 1));
    } catch (e) {
      return isError(e) ? e : new Error(e);
    }
  }
  function identity(value) {
    return value;
  }
  lodash.keys = keys;
  lodash.keysIn = keysIn;
  lodash.values = values;
  lodash.attempt = attempt;
  lodash.escape = escape;
  lodash.escapeRegExp = escapeRegExp;
  lodash.identity = identity;
  lodash.includes = includes;
  lodash.indexOf = indexOf;
  lodash.isArguments = isArguments;
  lodash.isArray = isArray;
  lodash.isError = isError;
  lodash.isFunction = isFunction;
  lodash.isNative = isNative;
  lodash.isNumber = isNumber;
  lodash.isObject = isObject;
  lodash.isRegExp = isRegExp;
  lodash.isString = isString;
  lodash.template = template;
  lodash.trim = trim;
  lodash.trunc = trunc;
  lodash.contains = includes;
  lodash.include = includes;
  lodash.VERSION = VERSION;
  if (typeof define == "function" && typeof define.amd == "object" && define.amd) {
    root._ = lodash;
    define(function() {
      return lodash;
    });
  } else if (freeExports && freeModule) {
    if (moduleExports) {
      (freeModule.exports = lodash)._ = lodash;
    } else {
      freeExports._ = lodash;
    }
  } else {
    root._ = lodash;
  }
}).call(this);

(function(root, factory) {
  if (typeof define === "function" && define.amd) {
    define([], factory);
  } else if (typeof exports === "object") {
    var randomColor = factory();
    if (typeof module === "object" && module && module.exports) {
      exports = module.exports = randomColor;
    }
    exports.randomColor = randomColor;
  } else {
    root.randomColor = factory();
  }
})(this, function() {
  var colorDictionary = {};
  loadColorBounds();
  var randomColor = function(options) {
    options = options || {};
    var H, S, B;
    if (options.count != null) {
      var totalColors = options.count, colors = [];
      options.count = null;
      while (totalColors > colors.length) {
        colors.push(randomColor(options));
      }
      options.count = totalColors;
      return colors;
    }
    H = pickHue(options);
    S = pickSaturation(H, options);
    B = pickBrightness(H, S, options);
    return setFormat([ H, S, B ], options);
  };
  function pickHue(options) {
    var hueRange = getHueRange(options.hue), hue = randomWithin(hueRange);
    if (hue < 0) {
      hue = 360 + hue;
    }
    return hue;
  }
  function pickSaturation(hue, options) {
    if (options.luminosity === "random") {
      return randomWithin([ 0, 100 ]);
    }
    if (options.hue === "monochrome") {
      return 0;
    }
    var saturationRange = getSaturationRange(hue);
    var sMin = saturationRange[0], sMax = saturationRange[1];
    switch (options.luminosity) {
     case "bright":
      sMin = 55;
      break;

     case "dark":
      sMin = sMax - 10;
      break;

     case "light":
      sMax = 55;
      break;
    }
    return randomWithin([ sMin, sMax ]);
  }
  function pickBrightness(H, S, options) {
    var brightness, bMin = getMinimumBrightness(H, S), bMax = 100;
    switch (options.luminosity) {
     case "dark":
      bMax = bMin + 20;
      break;

     case "light":
      bMin = (bMax + bMin) / 2;
      break;

     case "random":
      bMin = 0;
      bMax = 100;
      break;
    }
    return randomWithin([ bMin, bMax ]);
  }
  function setFormat(hsv, options) {
    switch (options.format) {
     case "hsvArray":
      return hsv;

     case "hslArray":
      return HSVtoHSL(hsv);

     case "hsl":
      var hsl = HSVtoHSL(hsv);
      return "hsl(" + hsl[0] + ", " + hsl[1] + "%, " + hsl[2] + "%)";

     case "rgbArray":
      return HSVtoRGB(hsv);

     case "rgb":
      var rgb = HSVtoRGB(hsv);
      return "rgb(" + rgb.join(", ") + ")";

     default:
      return HSVtoHex(hsv);
    }
  }
  function getMinimumBrightness(H, S) {
    var lowerBounds = getColorInfo(H).lowerBounds;
    for (var i = 0; i < lowerBounds.length - 1; i++) {
      var s1 = lowerBounds[i][0], v1 = lowerBounds[i][1];
      var s2 = lowerBounds[i + 1][0], v2 = lowerBounds[i + 1][1];
      if (S >= s1 && S <= s2) {
        var m = (v2 - v1) / (s2 - s1), b = v1 - m * s1;
        return m * S + b;
      }
    }
    return 0;
  }
  function getHueRange(colorInput) {
    if (typeof parseInt(colorInput) === "number") {
      var number = parseInt(colorInput);
      if (number < 360 && number > 0) {
        return [ number, number ];
      }
    }
    if (typeof colorInput === "string") {
      if (colorDictionary[colorInput]) {
        var color = colorDictionary[colorInput];
        if (color.hueRange) {
          return color.hueRange;
        }
      }
    }
    return [ 0, 360 ];
  }
  function getSaturationRange(hue) {
    return getColorInfo(hue).saturationRange;
  }
  function getColorInfo(hue) {
    if (hue >= 334 && hue <= 360) {
      hue -= 360;
    }
    for (var colorName in colorDictionary) {
      var color = colorDictionary[colorName];
      if (color.hueRange && hue >= color.hueRange[0] && hue <= color.hueRange[1]) {
        return colorDictionary[colorName];
      }
    }
    return "Color not found";
  }
  function randomWithin(range) {
    return Math.floor(range[0] + Math.random() * (range[1] + 1 - range[0]));
  }
  function HSVtoHex(hsv) {
    var rgb = HSVtoRGB(hsv);
    function componentToHex(c) {
      var hex = c.toString(16);
      return hex.length == 1 ? "0" + hex : hex;
    }
    var hex = "#" + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);
    return hex;
  }
  function defineColor(name, hueRange, lowerBounds) {
    var sMin = lowerBounds[0][0], sMax = lowerBounds[lowerBounds.length - 1][0], bMin = lowerBounds[lowerBounds.length - 1][1], bMax = lowerBounds[0][1];
    colorDictionary[name] = {
      hueRange: hueRange,
      lowerBounds: lowerBounds,
      saturationRange: [ sMin, sMax ],
      brightnessRange: [ bMin, bMax ]
    };
  }
  function loadColorBounds() {
    defineColor("monochrome", null, [ [ 0, 0 ], [ 100, 0 ] ]);
    defineColor("red", [ -26, 18 ], [ [ 20, 100 ], [ 30, 92 ], [ 40, 89 ], [ 50, 85 ], [ 60, 78 ], [ 70, 70 ], [ 80, 60 ], [ 90, 55 ], [ 100, 50 ] ]);
    defineColor("orange", [ 19, 46 ], [ [ 20, 100 ], [ 30, 93 ], [ 40, 88 ], [ 50, 86 ], [ 60, 85 ], [ 70, 70 ], [ 100, 70 ] ]);
    defineColor("yellow", [ 47, 62 ], [ [ 25, 100 ], [ 40, 94 ], [ 50, 89 ], [ 60, 86 ], [ 70, 84 ], [ 80, 82 ], [ 90, 80 ], [ 100, 75 ] ]);
    defineColor("green", [ 63, 178 ], [ [ 30, 100 ], [ 40, 90 ], [ 50, 85 ], [ 60, 81 ], [ 70, 74 ], [ 80, 64 ], [ 90, 50 ], [ 100, 40 ] ]);
    defineColor("blue", [ 179, 257 ], [ [ 20, 100 ], [ 30, 86 ], [ 40, 80 ], [ 50, 74 ], [ 60, 60 ], [ 70, 52 ], [ 80, 44 ], [ 90, 39 ], [ 100, 35 ] ]);
    defineColor("purple", [ 258, 282 ], [ [ 20, 100 ], [ 30, 87 ], [ 40, 79 ], [ 50, 70 ], [ 60, 65 ], [ 70, 59 ], [ 80, 52 ], [ 90, 45 ], [ 100, 42 ] ]);
    defineColor("pink", [ 283, 334 ], [ [ 20, 100 ], [ 30, 90 ], [ 40, 86 ], [ 60, 84 ], [ 80, 80 ], [ 90, 75 ], [ 100, 73 ] ]);
  }
  function HSVtoRGB(hsv) {
    var h = hsv[0];
    if (h === 0) {
      h = 1;
    }
    if (h === 360) {
      h = 359;
    }
    h = h / 360;
    var s = hsv[1] / 100, v = hsv[2] / 100;
    var h_i = Math.floor(h * 6), f = h * 6 - h_i, p = v * (1 - s), q = v * (1 - f * s), t = v * (1 - (1 - f) * s), r = 256, g = 256, b = 256;
    switch (h_i) {
     case 0:
      r = v, g = t, b = p;
      break;

     case 1:
      r = q, g = v, b = p;
      break;

     case 2:
      r = p, g = v, b = t;
      break;

     case 3:
      r = p, g = q, b = v;
      break;

     case 4:
      r = t, g = p, b = v;
      break;

     case 5:
      r = v, g = p, b = q;
      break;
    }
    var result = [ Math.floor(r * 255), Math.floor(g * 255), Math.floor(b * 255) ];
    return result;
  }
  function HSVtoHSL(hsv) {
    var h = hsv[0], s = hsv[1] / 100, v = hsv[2] / 100, k = (2 - s) * v;
    return [ h, Math.round(s * v / (k < 1 ? k : 2 - k) * 1e4) / 100, k / 2 * 100 ];
  }
  return randomColor;
});

"use strict";

var regPubMatch = /productNo(?:\.exact|\.raw)?(?=\:|$)/, regEmerge = / ?emerge/g, regHidden = / ?hidden/g, regLoad = / ?loading/g, regSelected = / ?selected/g, regFiltered = / ?filtered/g, regOpened = / ?opened/g, regDone = / ?done|$/gm, regFail = / ?failed/g;

function addEvent(element, evt, fnc) {
  return element.addEventListener ? element.addEventListener(evt, fnc, false) : element.attachEvent("on" + evt, fnc);
}

function swapClass(element, string, regex) {
  if (string !== "") {
    element.className = regex.test(element.className) ? element.className.replace(regex, "") + " " + string : element.className + " " + string;
  } else {
    element.className = element.className.replace(regex, "");
  }
}

function removeEvent(element, evt, fnc) {
  return element.removeEventListener ? element.removeEventListener(evt, fnc, false) : element.detachEvent("on" + evt, fnc);
}

String.prototype.toTitle = function() {
  return this.replace(/(?:\W?)\w\S*/g, function(txt) {
    return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
  });
};

String.prototype.toPubName = function() {
  var removed, count = 0, extraction = [], regQueryPubName = /(?:\b[\-_a-zA-Z]{1,3})?[ \t\-]*(?:(?:[\.\-]|[0-9]+)+)+(?:_?(?:sup|SUP)[A-Za-z]*)?/g, regEOLDashCheck = /[\-\cI\v\0\f]$/m;
  removed = this.replace(regQueryPubName, function(txt) {
    if (extraction && extraction.length > 0 && regEOLDashCheck.test(extraction[count - 1])) {
      extraction[count - 1] += txt.toUpperCase().replace(/\s/g, "");
    } else {
      extraction.push(txt.toUpperCase().replace(/\s/g, ""));
    }
    count += 1;
    return "";
  });
  return {
    extract: extraction,
    remove: removed
  };
};

window.downloader = function(el) {
  var link = document.createElement("a"), file = el.href || el.getAttribute("href") || "";
  if (file === "") {
    return false;
  }
  link.download = el.download || el.getAttribute("download");
  link.href = file;
  link.target = "_blank";
  try {
    link.click();
  } catch (e) {
    try {
      window.open(file);
    } catch (ee) {
      window.location.href = file;
    }
  }
  return false;
};

"use strict";

var App = function() {
  var months = {
    "01": "Jan",
    "02": "Feb",
    "03": "Mar",
    "04": "Apr",
    "05": "May",
    "06": "Jun",
    "07": "Jul",
    "08": "Aug",
    "09": "Sep",
    "10": "Oct",
    "11": "Nov",
    "12": "Dec"
  }, wrap_ = document.getElementById("wrap"), searchWrap_ = document.getElementById("search-wrap"), searchRestore_ = document.getElementById("search-restore"), page_ = document.getElementById("page"), results_ = document.getElementById("results"), summary_ = document.getElementById("summary"), count_ = document.getElementById("count"), term_ = document.getElementById("term"), total_ = document.getElementById("total"), query_ = document.getElementById("query"), send_ = document.getElementById("send"), moreMeta_ = document.getElementById("more-meta"), moreContent_ = document.getElementById("more-content"), related_ = document.getElementById("related"), infiniLabel_ = document.getElementById("infini-label"), infiniScroll_ = document.getElementById("infini-scroll"), infiniStatus_ = document.getElementById("infini-status"), loader_ = document.getElementById("loader"), placeContent = document.cookie.placeContent || "", placeMeta = document.cookie.placeMeta || "", bodyRect, relatedRect, resultsRect, relatedOffsetTop, stickyBarPosition;
  CSSStyleSheet.prototype.addCSSRule = function(selector, rules, index) {
    if ("insertRule" in this) {
      this.insertRule(selector + "{" + rules + "}", index);
    } else if ("addRule" in this) {
      this.addRule(selector, rules, index);
    }
  };
  function filterOutliers(someArray) {
    var values = someArray.concat();
    values.sort(function(a, b) {
      return a - b;
    });
    var q1 = values[Math.floor(values.length / 4)];
    var q3 = values[Math.ceil(values.length * (3 / 4))];
    var iqr = q3 - q1;
    var maxValue = q3 + iqr * 1.5;
    return values.filter(function(x) {
      return x > maxValue;
    });
  }
  return {
    wrap_: wrap_,
    searchWrap_: searchWrap_,
    searchRestore_: searchRestore_,
    page_: page_,
    results_: results_,
    summary_: summary_,
    count_: count_,
    term_: term_,
    total_: total_,
    query_: query_,
    send_: send_,
    moreMeta_: moreMeta_,
    moreContent_: moreContent_,
    related_: related_,
    placeContent: placeContent,
    placeMeta: placeMeta,
    infiniLabel_: infiniLabel_,
    infiniScroll_: infiniScroll_,
    infiniStatus_: infiniStatus_,
    loader_: loader_,
    infiniScroll: true,
    done: false,
    loading: {
      now: false,
      stillMore: false,
      currentHeight: 0
    },
    bodyRect: bodyRect,
    relatedRect: relatedRect,
    resultsRect: resultsRect,
    relatedOffsetTop: relatedOffsetTop,
    stickyBarPosition: stickyBarPosition,
    traveling: false,
    pos: 0,
    term: "",
    scoresContent: [],
    scoresRelatives: [],
    selectedResults: [],
    selectedTotal: 0,
    colors: {},
    dataRender: function(data, allScores) {
      var output = {}, regType = /chapter|section/, index, group, number, fullPub, rawText, text, date, highlights, fileFormat;
      if (!data._source && data.key && data.score) {
        index = _.indexOf(allScores, data.score);
        group = index > -1 ? " match-" + index : "";
        app.colors[data.key] = index;
        output = {
          url: ("https:" == document.location.protocol ? "https://that.pub/get/" : "http://get.that.pub/") + data.key.toLowerCase() + ".pdf",
          key: data.key,
          score: data.score,
          gravitas: _.contains(filterOutliers(allScores), data.score) || data.score >= 1 ? " pretty" + group : " boring" + group
        };
      } else if (data._source.text) {
        number = data._source.number;
        text = data.highlight["text.english2"];
        rawText = data._source.text;
        fullPub = data._source.productNo;
        highlights = Object.keys(data.highlight);
        fileFormat = data._type !== "form" ? ".pdf" : ".xfdl";
        if (regPubMatch.test(highlights.join(":"))) {
          fullPub = data.highlight["productNo.exact"] || data.highlight["productNo.raw"] || data.highlight.productNo;
          fullPub = fullPub.shift();
        }
        date = data._source.releaseDate ? data._source.releaseDate.substring(6, 8) + " " + months[data._source.releaseDate.substring(4, 6)] + " " + data._source.releaseDate.substring(0, 4) : data._source.publishedDate.substring(0, 2) + " " + months[data._source.publishedDate.substring(2, 4)] + " " + data._source.publishedDate.substring(4, 8);
        if (regType.test(data._type) && data._type.length == 7) {
          number = data._type.toTitle() + " " + data._source.number;
        }
        index = app.colors[data._source.productNo || data._source.pubName];
        group = _.isNumber(index) && (index >= 0 || index < 5) ? " match-" + index : "";
        output = {
          score: data._score,
          gravitas: _.contains(filterOutliers(allScores), data._score) || data._score >= 1 ? " pretty" + group : " boring" + group,
          date: date,
          url: ("https:" == document.location.protocol ? "https://that.pub/get/" : "http://get.that.pub/") + data._source.productNo.toLowerCase() + fileFormat,
          fullPub: fullPub,
          title: data.highlight.title || data._source.title || null,
          rawTitle: data._source.title,
          sub: rawText ? number : "",
          details: {
            chapter: data._source.chapter && data._source.chapter.number || null,
            chapterTitle: data.highlight["chapter.title"] || data._source.chapter && data._source.chapter.title || null,
            section: data._source.section && data._source.section.number || null,
            sectionTitle: data.highlight["section.title"] || data._source.section && data._source.section.title || null
          },
          rawText: rawText,
          concatText: data.highlight["text"] && data.highlight["text"][0] || null,
          parts: Array.isArray(text) ? text : null,
          fileFormat: fileFormat,
          type: rawText ? " content" : " doc"
        };
      }
      return output || null;
    },
    querySetup: function(term) {
      return function(name) {
        return {
          term: term,
          pubName: name.extract,
          noPubName: name.remove
        };
      }(term.toPubName());
    },
    addItem: function(results, templateCode, allScores) {
      var tmp = "", that = this, rl = results.length, a = 0;
      for (;a < rl; ++a) {
        tmp += _.template(templateCode)(that.dataRender(results[a], allScores));
      }
      return tmp;
    },
    searchToggle: function(visibility) {
      var screenHeight = window.innerHeight;
      if (visibility === "hidden") {
        snabbt(this.searchWrap_, {
          position: [ 0, -screenHeight, 0 ],
          easing: "easeOut",
          duration: 150
        });
        snabbt(this.wrap_, {
          opacity: 1,
          fromOpacity: .5,
          easing: "easeOut",
          delay: 150
        });
        swapClass(document.body, "", regEmerge);
        removeEvent(this.searchWrap_, "click", modalClose);
        this.infiniScroll = this.infiniScroll_ ? this.infiniScroll_.checked || !!this.infiniScroll_.checked : true;
      } else if (visibility === "visible") {
        snabbt(this.wrap_, {
          opacity: .5,
          fromOpacity: 1,
          easing: "easeOut"
        });
        snabbt(this.searchWrap_, {
          position: [ 0, 0, 0 ],
          easing: "easeOut",
          duration: 150
        });
        swapClass(document.body, "emerge", regEmerge);
        addEvent(this.searchWrap_, "click", modalClose);
        this.infiniScroll = false;
      }
    },
    isDone: function(done) {
      var answer;
      if (typeof done === "undefined") {
        answer = this.done;
      } else if (done === true) {
        swapClass(document.body, "done", regDone);
        this.done = done;
        answer = done;
      } else if (done === false) {
        swapClass(document.body, "failed", regFail);
        this.done = done;
        answer = done;
      }
      return answer;
    }
  };
};

"use strict";

var app = new App();

app.resultTemplate = document.getElementById("result-template");

app.relatedTemplate = document.getElementById("related-template");

function revealText(event) {
  var open = regOpened.test(this.parentNode.className);
  this.innerHTML = "";
  if (!open) {
    swapClass(this.parentNode, "opened", regOpened);
    this.appendChild(document.createTextNode("consolidate results"));
  } else {
    this.parentNode.className = this.parentNode.className.replace(regOpened, "");
    this.appendChild(document.createTextNode("expand to full paragraph"));
  }
  if (event.preventDefault) {
    event.preventDefault();
  } else {
    event.returnValue = false;
  }
  return false;
}

function dataResponse(httpRequest, action) {
  var response = JSON.parse(httpRequest.responseText);
  var content = response[0] || null;
  var meta = response[1] || null;
  var expires = new Date(Date.now() + 36e5);
  var a = 0, b = 0, reveals, rl;
  if (content && content.hits.total === 0 && meta && meta.hits.total === 0) {
    return app.isDone(false);
  }
  app.isDone(true);
  expires = expires.toUTCString();
  if (content) {
    var currentContent = content.hits.hits.length;
    app.term_.innerHTML = app.term;
    app.total_.innerHTML = content.hits.total;
    app.placeContent = content._scroll_id;
    document.cookie = "placeContent=" + app.placeContent + "; expires=" + expires;
    if (action !== "more") {
      var currentRelatives = content.aggregations.related_doc.buckets.length;
      window.scroll(0, 0);
      for (;b < currentContent; ++b) {
        app.scoresContent[b] = content.hits.hits[b]["_score"];
      }
      for (b = 0; b < currentRelatives; ++b) {
        app.scoresContent[b] = content.aggregations.related_doc.buckets[b]["score"];
      }
      app.related_.innerHTML = app.addItem(content.aggregations.related_doc.buckets, app.relatedTemplate.textContent || app.relatedTemplate.innerText, app.scoresRelatives);
      app.results_.innerHTML = app.addItem(content.hits.hits, app.resultTemplate.textContent || app.resultTemplate.innerText, app.scoresContent);
      app.count_.innerHTML = currentContent;
      app.relatedRect = app.related_.getBoundingClientRect();
      app.bodyRect = document.body.getBoundingClientRect();
      app.stickyBarPosition = Math.abs(app.relatedRect.top) + Math.abs(app.bodyRect.top) + Math.abs(app.relatedRect.height);
    } else {
      var contentGathered = app.scoresContent.length;
      for (b = 0; b < currentContent; ++b) {
        app.scoresContent[b + contentGathered] = content.hits.hits[b]["_score"];
      }
      app.results_.innerHTML += app.addItem(content.hits.hits, app.resultTemplate.textContent || app.resultTemplate.innerText, app.scoresContent);
      app.count_.innerHTML = app.scoresContent.length;
    }
    reveals = document.querySelectorAll(".text > .reveal");
    rl = reveals.length;
    for (;a < rl; ++a) {
      addEvent(reveals[a], "click", revealText);
    }
    if (content.hits.hits.length < 20) {
      swapClass(app.moreContent_, "hidden", regHidden);
      app.loading.stillMore = false;
    } else {
      swapClass(app.moreContent_, "", regHidden);
      app.loading.stillMore = true;
    }
  }
  if (meta) {
    app.placeMeta = meta._scroll_id;
    document.cookie = "placeMeta=" + app.placeMeta + "; expires=" + expires;
  }
  app.resultsRect = app.results_.getBoundingClientRect();
  app.loading.currentHeight = Math.abs(app.resultsRect.height);
}

function sendData(responder, query, type, action, spot, dot, clbk) {
  var httpRequest = new XMLHttpRequest();
  var url = ("https:" == document.location.protocol ? "https://that.pub/find/" : "http://find.that.pub/") + type + "/" + action;
  httpRequest.onreadystatechange = function() {
    if (httpRequest.readyState === 4) {
      if (httpRequest.status === 200) {
        responder(httpRequest, action);
        clbk(action === "more" ? null : "");
      }
    }
  };
  httpRequest.open("POST", url, true);
  httpRequest.setRequestHeader("Content-type", "application/json");
  httpRequest.send(JSON.stringify({
    t: app.querySetup(query),
    g: spot,
    s: dot
  }));
}

function more(event) {
  event.preventDefault();
  swapClass(app.loader_, "loading", regLoad);
  sendData(dataResponse, document.cookie.placeContent || app.placeContent ? "" : app.term, "content", "more", document.cookie.placeContent || app.placeContent, null, endLoading);
  return false;
}

function modalClose(event) {
  if (event.target === event.currentTarget) {
    app.searchToggle("hidden");
  }
}

function scrollWheeler() {
  var t = document.documentElement || document.body.parentNode, pos = (t && typeof t.ScrollTop === "number" ? t : document.body).ScrollTop || window.pageYOffset, delta = pos - app.pos;
  if (app.infiniScroll === true && app.loading.now === false && app.loading.stillMore === true && delta > 0 && pos > app.loading.currentHeight - 1200) {
    app.loading.now = true;
    more();
  }
  app.pos = pos;
}

function infini() {
  var status;
  app.infiniScroll = this.checked || !!this.checked;
  status = app.infiniScroll ? "enabled" : "disabled";
  app.infiniLabel_.className = status;
  app.infiniLabel_.setAttribute("title", "Infinite scroll " + status);
  if (!status) {
    this.removeAttribute("checked");
  }
}

function endLoading(el) {
  el = el === null ? app.moreContent_ : el === "" ? app.send_ : null;
  swapClass(app.loader_, "", regLoad);
  app.loading.now = false;
  if (el == app.send_) {
    app.searchToggle("hidden");
  }
}

"use strict";

addEvent(app.send_, "click", function(event) {
  if (event && event.preventDefault) {
    event.preventDefault();
  } else {
    event.returnValue = false;
  }
  if (!_.trim(app.query_.value)) {
    app.query_.focus();
    snabbt(app.query_, "attention", {
      rotation: [ 0, 0, Math.PI / 2 ],
      springConstant: 1.9,
      springDeacceleration: .9
    });
    return false;
  }
  swapClass(app.loader_, "loading", regLoad);
  app.term = _.trim(app.query_.value);
  sendData(dataResponse, app.term, "content", "search", app.placeContent, app.placeMeta, endLoading);
  return false;
});

addEvent(app.query_, "focus", function() {
  return false;
});

addEvent(app.query_, "keypress", function(event) {
  if (event.which === 13) {
    app.send_.click();
    return false;
  }
});

addEvent(document, "keyup", function(event) {
  if (event.which === 27) {
    if (event.preventDefault) {
      event.preventDefault();
    } else {
      event.returnValue = false;
    }
    if (regEmerge.test(document.body.className)) {
      app.searchToggle("hidden");
    } else {}
  }
});

addEvent(app.moreContent_, "click", more);

addEvent(app.moreMeta_, "click", function(event) {
  if (event.preventDefault) {
    event.preventDefault();
  } else {
    event.returnValue = false;
  }
  swapClass(app.loader_, "loading", regLoad);
  sendData(dataResponse, document.cookie.placeMeta || app.placeMeta ? "" : app.term, "meta", "more", null, document.cookie.placeMeta || app.placeMeta, endLoading);
  return false;
});

addEvent(app.searchRestore_, "click", function(event) {
  if (event.preventDefault) {
    event.preventDefault();
  } else {
    event.returnValue = false;
  }
  if (regEmerge.test(document.body.className)) {
    app.searchToggle("hidden");
  } else {
    app.searchToggle("visible");
    app.query_.value = app.term || "";
    app.query_.focus();
  }
  return false;
});

addEvent(app.infiniScroll_, "change", infini);

addEvent(window, "scroll", scrollWheeler);

addEvent(window, "load", function() {
  app.query_.focus();
  if (window.location.search !== "") {
    app.query_.value = decodeURIComponent(window.location.search.slice(3).replace(/\+(?!\%20)/g, "%20"));
    app.term = _.trim(app.query_.value);
    app.send_.click();
  }
  var l = document.createElement("link");
  l.rel = "stylesheet";
  l.href = "//fonts.googleapis.com/css?family=Droid+Serif:400,700|Ubuntu:300,400,700";
  var h = document.getElementsByTagName("head")[0];
  h.parentNode.insertBefore(l, h);
});
</script>
  </body>
</html>
